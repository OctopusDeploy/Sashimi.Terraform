FROM mcr.microsoft.com/dotnet/core/sdk:3.1-focal

VOLUME /publish
# Don't call home
ENV DOTNET_CLI_TELEMETRY_OPTOUT=1
# Path to Calamari exe
ENV CalamariBinaries_RelativePath=/publish/Calamari.Terraform/linux-x64
# Forces CI
ENV TEAMCITY_VERSION=1.2.3

WORKDIR /Octopus

COPY ./install.sh ./install.sh

RUN chmod u+x ./install.sh

ENTRYPOINT ["./install.sh"]